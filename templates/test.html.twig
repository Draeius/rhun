
<html>
    <head>
        <script type="text/javascript" src="{{ asset('js/jquery.min.js')}}"></script>
        <script type="text/javascript" src="{{ asset('js/velocity.min.js')}}"></script>
        <script type="text/javascript" src="{{ asset('vis/vis.min.js')}}"></script>
        <script type="text/javascript" src="{{ asset('js/built/0.0.1/main.js')}}"></script>
    </head>
    <body>
        {{ form_start(form) }}
        {{ form_end(form) }}

        <script>
            $(document).ready(function () {
                var allowedAreas = $('#persist_race_form_allowedAreas');
// When sport gets selected ...
                allowedAreas.change(function () {
                    // ... retrieve the corresponding form.
                    var $form = $(this).closest('form');
                    // Simulate form data, but only include the selected sport value.
                    var data = $form.serialize();

                    // Submit data via AJAX to the form's action path.
                    $.ajax({
                        url: $form.attr('action'),
                        type: $form.attr('method'),
                        data: data,
                        success: function (html) {
                            // Replace current position field ...
                            $('#persist_race_form_location').replaceWith(
                                    // ... with the returned one from the AJAX response.
                                    $(html).find('#persist_race_form_location')
                                    );
                            $('#persist_race_form_deathLocation').replaceWith(
                                    // ... with the returned one from the AJAX response.
                                    $(html).find('#persist_race_form_deathLocation')
                                    );

                            // Position field now displays the appropriate positions.
                        }
                    });
                });
            })
        </script>
    </body>
</html>